<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 2 Data comparability | Source code and supporting information for _Predicting abundances from acoustic data: North Eastern Bird Communities</title>
  <meta name="description" content="Section 2 Data comparability | Source code and supporting information for _Predicting abundances from acoustic data: North Eastern Bird Communities" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 2 Data comparability | Source code and supporting information for _Predicting abundances from acoustic data: North Eastern Bird Communities" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="vjjan91/newHampshire-pointCount-acoustics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 2 Data comparability | Source code and supporting information for _Predicting abundances from acoustic data: North Eastern Bird Communities" />
  
  
  

<meta name="author" content="Vijay Ramesh" />
<meta name="author" content="Pooja Panwar" />
<meta name="author" content="Orlando Acevedo-Charry" />
<meta name="author" content="Sharon Martinson" />
<meta name="author" content="Laurel Symes" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="subsetting-data-and-running-exploratory-data-analyses.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-comparability.html"><a href="data-comparability.html"><i class="fa fa-check"></i><b>2</b> Data comparability</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-comparability.html"><a href="data-comparability.html#load-necessary-libraries"><i class="fa fa-check"></i><b>2.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="2.2" data-path="data-comparability.html"><a href="data-comparability.html#loading-point-count-and-acoustic-data"><i class="fa fa-check"></i><b>2.2</b> Loading point count and acoustic data</a></li>
<li class="chapter" data-level="2.3" data-path="data-comparability.html"><a href="data-comparability.html#cleaning-up-point-count-data"><i class="fa fa-check"></i><b>2.3</b> Cleaning up point count data</a></li>
<li class="chapter" data-level="2.4" data-path="data-comparability.html"><a href="data-comparability.html#cleaning-up-acoustic-data"><i class="fa fa-check"></i><b>2.4</b> Cleaning up acoustic data</a></li>
<li class="chapter" data-level="2.5" data-path="data-comparability.html"><a href="data-comparability.html#creating-a-combined-dataset"><i class="fa fa-check"></i><b>2.5</b> Creating a combined dataset</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html"><i class="fa fa-check"></i><b>3</b> Subsetting data and running exploratory data analyses</a>
<ul>
<li class="chapter" data-level="3.1" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html#load-necessary-libraries-1"><i class="fa fa-check"></i><b>3.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="3.2" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html#load-dataframe-containing-point-count-and-acoustic-data"><i class="fa fa-check"></i><b>3.2</b> Load dataframe containing point count and acoustic data</a></li>
<li class="chapter" data-level="3.3" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html#estimate-total-abundance-and-richness-for-point-count-and-acoustic-data"><i class="fa fa-check"></i><b>3.3</b> Estimate total abundance and richness for point count and acoustic data</a></li>
<li class="chapter" data-level="3.4" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html#creating-a-single-dataframe-prior-to-running-statistical-analysis"><i class="fa fa-check"></i><b>3.4</b> Creating a single dataframe prior to running statistical analysis</a></li>
<li class="chapter" data-level="3.5" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html#filtering-criteria-for-species-inclusion"><i class="fa fa-check"></i><b>3.5</b> Filtering criteria for species inclusion</a></li>
<li class="chapter" data-level="3.6" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html#explore-whether-time-of-day-shows-any-variation-in-abundancedetections"><i class="fa fa-check"></i><b>3.6</b> Explore whether time of day shows any variation in abundance/detections?</a></li>
<li class="chapter" data-level="3.7" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html#examining-abundance-and-acoustic-detections-as-a-function-of-time-of-day-by-species"><i class="fa fa-check"></i><b>3.7</b> Examining abundance and acoustic detections as a function of time of day by species</a></li>
<li class="chapter" data-level="3.8" data-path="subsetting-data-and-running-exploratory-data-analyses.html"><a href="subsetting-data-and-running-exploratory-data-analyses.html#save-the-subsetted-data-to-file"><i class="fa fa-check"></i><b>3.8</b> Save the subsetted data to file</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="creating-study-area-map.html"><a href="creating-study-area-map.html"><i class="fa fa-check"></i><b>4</b> Creating study area map</a>
<ul>
<li class="chapter" data-level="4.1" data-path="creating-study-area-map.html"><a href="creating-study-area-map.html#load-necessary-libraries-2"><i class="fa fa-check"></i><b>4.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="4.2" data-path="creating-study-area-map.html"><a href="creating-study-area-map.html#load-associated-shapefiles-for-each-region-sampled"><i class="fa fa-check"></i><b>4.2</b> Load associated shapefiles for each region sampled</a></li>
<li class="chapter" data-level="4.3" data-path="creating-study-area-map.html"><a href="creating-study-area-map.html#download-natural-earth-layers"><i class="fa fa-check"></i><b>4.3</b> Download natural earth layers</a></li>
<li class="chapter" data-level="4.4" data-path="creating-study-area-map.html"><a href="creating-study-area-map.html#acadia-national-park"><i class="fa fa-check"></i><b>4.4</b> Acadia National Park</a></li>
<li class="chapter" data-level="4.5" data-path="creating-study-area-map.html"><a href="creating-study-area-map.html#hubbard-brook"><i class="fa fa-check"></i><b>4.5</b> Hubbard Brook</a></li>
<li class="chapter" data-level="4.6" data-path="creating-study-area-map.html"><a href="creating-study-area-map.html#katahdin-woods-and-waters"><i class="fa fa-check"></i><b>4.6</b> Katahdin Woods and Waters</a></li>
<li class="chapter" data-level="4.7" data-path="creating-study-area-map.html"><a href="creating-study-area-map.html#marsh-billings"><i class="fa fa-check"></i><b>4.7</b> Marsh Billings</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="abundance-vs.-acoustic-detections.html"><a href="abundance-vs.-acoustic-detections.html"><i class="fa fa-check"></i><b>5</b> Abundance vs.Â acoustic detections</a>
<ul>
<li class="chapter" data-level="5.1" data-path="abundance-vs.-acoustic-detections.html"><a href="abundance-vs.-acoustic-detections.html#load-necessary-libraries-3"><i class="fa fa-check"></i><b>5.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="5.2" data-path="abundance-vs.-acoustic-detections.html"><a href="abundance-vs.-acoustic-detections.html#load-dataframe-containing-data-that-is-already-filtered-for-a-subset-of-species"><i class="fa fa-check"></i><b>5.2</b> Load dataframe containing data that is already filtered for a subset of species</a></li>
<li class="chapter" data-level="5.3" data-path="abundance-vs.-acoustic-detections.html"><a href="abundance-vs.-acoustic-detections.html#correlations-between-abundance-and-detections"><i class="fa fa-check"></i><b>5.3</b> Correlations between abundance and detections</a></li>
<li class="chapter" data-level="5.4" data-path="abundance-vs.-acoustic-detections.html"><a href="abundance-vs.-acoustic-detections.html#scaling-of-predictors-and-determining-distribution-family"><i class="fa fa-check"></i><b>5.4</b> Scaling of predictors and determining distribution family</a></li>
<li class="chapter" data-level="5.5" data-path="abundance-vs.-acoustic-detections.html"><a href="abundance-vs.-acoustic-detections.html#generalized-linear-mixed-model-between-abundance-and-acoustic-detections"><i class="fa fa-check"></i><b>5.5</b> Generalized linear mixed model between abundance and acoustic detections</a></li>
<li class="chapter" data-level="5.6" data-path="abundance-vs.-acoustic-detections.html"><a href="abundance-vs.-acoustic-detections.html#model-diagnostics"><i class="fa fa-check"></i><b>5.6</b> Model diagnostics</a></li>
<li class="chapter" data-level="5.7" data-path="abundance-vs.-acoustic-detections.html"><a href="abundance-vs.-acoustic-detections.html#predict-abundance-given-detections"><i class="fa fa-check"></i><b>5.7</b> Predict abundance given detections</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="calling-rates.html"><a href="calling-rates.html"><i class="fa fa-check"></i><b>6</b> Calling rates</a>
<ul>
<li class="chapter" data-level="6.1" data-path="calling-rates.html"><a href="calling-rates.html#load-necessary-libraries-4"><i class="fa fa-check"></i><b>6.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="6.2" data-path="calling-rates.html"><a href="calling-rates.html#load-previous-model-object-and-filtered-data"><i class="fa fa-check"></i><b>6.2</b> Load previous model object and filtered data</a></li>
<li class="chapter" data-level="6.3" data-path="calling-rates.html"><a href="calling-rates.html#calculating-calling-rate"><i class="fa fa-check"></i><b>6.3</b> Calculating calling rate</a></li>
<li class="chapter" data-level="6.4" data-path="calling-rates.html"><a href="calling-rates.html#does-calling-rate-vary-as-a-function-of-number-of-individuals"><i class="fa fa-check"></i><b>6.4</b> Does calling rate vary as a function of number of individuals</a></li>
<li class="chapter" data-level="6.5" data-path="calling-rates.html"><a href="calling-rates.html#is-calling-rate-linked-to-the-fit-between-predicted-abundance-and-acoustic-detections"><i class="fa fa-check"></i><b>6.5</b> Is calling rate linked to the fit between predicted abundance and acoustic detections?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html"><i class="fa fa-check"></i><b>7</b> Hierarchical model approach</a>
<ul>
<li class="chapter" data-level="7.1" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#packages"><i class="fa fa-check"></i><b>7.1</b> Packages</a></li>
<li class="chapter" data-level="7.2" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#loading-and-exploring-data"><i class="fa fa-check"></i><b>7.2</b> Loading and exploring data</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#figures-of-the-data"><i class="fa fa-check"></i><b>7.2.1</b> Figures of the data</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#hierarchical-model-for-counts-with-two-observation-processes"><i class="fa fa-check"></i><b>7.3</b> Hierarchical model for counts with two observation processes</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#state-process-for-morning-expected-counts"><i class="fa fa-check"></i><b>7.3.1</b> State process for morning expected counts</a></li>
<li class="chapter" data-level="7.3.2" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#observation-process-for-morning-point-counts"><i class="fa fa-check"></i><b>7.3.2</b> Observation process for morning point counts</a></li>
<li class="chapter" data-level="7.3.3" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#observation-process-for-morning-acoustic-detections"><i class="fa fa-check"></i><b>7.3.3</b> Observation process for morning acoustic detections</a></li>
<li class="chapter" data-level="7.3.4" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#coding-observation-point-counts"><i class="fa fa-check"></i><b>7.3.4</b> Coding Observation point counts</a></li>
<li class="chapter" data-level="7.3.5" data-path="hierarchical-model-approach.html"><a href="hierarchical-model-approach.html#coding-acoustic-detections-counts"><i class="fa fa-check"></i><b>7.3.5</b> Coding Acoustic detections counts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html"><a href="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html"><i class="fa fa-check"></i><b>8</b> Another example with hierarchical model approach - OVEN in Katahdin Woods and Waters</a>
<ul>
<li class="chapter" data-level="8.1" data-path="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html"><a href="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html#packages-1"><i class="fa fa-check"></i><b>8.1</b> Packages</a></li>
<li class="chapter" data-level="8.2" data-path="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html"><a href="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html#loading-and-exploring-data-1"><i class="fa fa-check"></i><b>8.2</b> Loading and exploring data</a></li>
<li class="chapter" data-level="8.3" data-path="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html"><a href="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html#hierarchical-model-for-counts-with-two-observation-processes-1"><i class="fa fa-check"></i><b>8.3</b> Hierarchical model for counts with two observation processes</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html"><a href="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html#coding-observation-point-counts-1"><i class="fa fa-check"></i><b>8.3.1</b> Coding Observation point counts</a></li>
<li class="chapter" data-level="8.3.2" data-path="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html"><a href="another-example-with-hierarchical-model-approach---oven-in-katahdin-woods-and-waters.html#coding-acoustic-detections-counts-1"><i class="fa fa-check"></i><b>8.3.2</b> Coding Acoustic detections counts</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code and supporting information for _Predicting abundances from acoustic data: North Eastern Bird Communities</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-comparability" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Section 2</span> Data comparability<a href="data-comparability.html#data-comparability" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this script, we process the point-count and acoustic data and create a combined dataset for downstream analysis.</p>
<div id="load-necessary-libraries" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Load necessary libraries<a href="data-comparability.html#load-necessary-libraries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-comparability.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="data-comparability.html#cb1-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="data-comparability.html#cb1-3" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-4"><a href="data-comparability.html#cb1-4" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb1-5"><a href="data-comparability.html#cb1-5" tabindex="-1"></a><span class="fu">library</span>(scico)</span>
<span id="cb1-6"><a href="data-comparability.html#cb1-6" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-7"><a href="data-comparability.html#cb1-7" tabindex="-1"></a><span class="fu">library</span>(extrafont)</span>
<span id="cb1-8"><a href="data-comparability.html#cb1-8" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-9"><a href="data-comparability.html#cb1-9" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb1-10"><a href="data-comparability.html#cb1-10" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-11"><a href="data-comparability.html#cb1-11" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-12"><a href="data-comparability.html#cb1-12" tabindex="-1"></a><span class="fu">library</span>(ggspatial)</span>
<span id="cb1-13"><a href="data-comparability.html#cb1-13" tabindex="-1"></a><span class="fu">library</span>(colorspace)</span>
<span id="cb1-14"><a href="data-comparability.html#cb1-14" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-15"><a href="data-comparability.html#cb1-15" tabindex="-1"></a><span class="fu">library</span>(naniar)</span></code></pre></div>
</div>
<div id="loading-point-count-and-acoustic-data" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Loading point count and acoustic data<a href="data-comparability.html#loading-point-count-and-acoustic-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-comparability.html#cb2-1" tabindex="-1"></a>point_count <span class="ot">&lt;-</span>  <span class="fu">read.csv</span>(<span class="st">&quot;data/point-count-data.csv&quot;</span>)</span>
<span id="cb2-2"><a href="data-comparability.html#cb2-2" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span>  <span class="fu">read.csv</span>(<span class="st">&quot;data/acoustic-data.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="cleaning-up-point-count-data" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Cleaning up point count data<a href="data-comparability.html#cleaning-up-point-count-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-comparability.html#cb3-1" tabindex="-1"></a><span class="co"># include distance information in lieu of the categories</span></span>
<span id="cb3-2"><a href="data-comparability.html#cb3-2" tabindex="-1"></a>point_count <span class="ot">&lt;-</span> point_count <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="data-comparability.html#cb3-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">distance =</span> <span class="fu">case_when</span>(distance_band <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;0-10&quot;</span>,</span>
<span id="cb3-4"><a href="data-comparability.html#cb3-4" tabindex="-1"></a>                              distance_band <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;10-25&quot;</span>,</span>
<span id="cb3-5"><a href="data-comparability.html#cb3-5" tabindex="-1"></a>                              distance_band <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;25-50&quot;</span>,</span>
<span id="cb3-6"><a href="data-comparability.html#cb3-6" tabindex="-1"></a>                              distance_band <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span><span class="st">&quot;&gt;50&quot;</span>,</span>
<span id="cb3-7"><a href="data-comparability.html#cb3-7" tabindex="-1"></a>                              distance_band <span class="sc">==</span> <span class="cn">NA</span> <span class="sc">~</span> <span class="cn">NA</span>))</span>
<span id="cb3-8"><a href="data-comparability.html#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="data-comparability.html#cb3-9" tabindex="-1"></a><span class="co"># convert dates to standard YYYYMMDD format</span></span>
<span id="cb3-10"><a href="data-comparability.html#cb3-10" tabindex="-1"></a>point_count<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">mdy</span>(point_count<span class="sc">$</span>date)</span>
<span id="cb3-11"><a href="data-comparability.html#cb3-11" tabindex="-1"></a></span>
<span id="cb3-12"><a href="data-comparability.html#cb3-12" tabindex="-1"></a><span class="co"># convert start time and observation time to lubridate format</span></span>
<span id="cb3-13"><a href="data-comparability.html#cb3-13" tabindex="-1"></a>point_count<span class="sc">$</span>start_time <span class="ot">&lt;-</span> hms<span class="sc">::</span><span class="fu">as_hms</span>(point_count<span class="sc">$</span>start_time)</span>
<span id="cb3-14"><a href="data-comparability.html#cb3-14" tabindex="-1"></a>point_count<span class="sc">$</span>observation_time <span class="ot">&lt;-</span> hms<span class="sc">::</span><span class="fu">as_hms</span>(point_count<span class="sc">$</span>observation_time)</span>
<span id="cb3-15"><a href="data-comparability.html#cb3-15" tabindex="-1"></a></span>
<span id="cb3-16"><a href="data-comparability.html#cb3-16" tabindex="-1"></a><span class="co"># remove incidental observations</span></span>
<span id="cb3-17"><a href="data-comparability.html#cb3-17" tabindex="-1"></a>point_count <span class="ot">&lt;-</span> point_count <span class="sc">%&gt;%</span></span>
<span id="cb3-18"><a href="data-comparability.html#cb3-18" tabindex="-1"></a>  <span class="fu">filter</span>(observation_method <span class="sc">!=</span> <span class="st">&quot;I&quot;</span>)</span>
<span id="cb3-19"><a href="data-comparability.html#cb3-19" tabindex="-1"></a></span>
<span id="cb3-20"><a href="data-comparability.html#cb3-20" tabindex="-1"></a><span class="co"># remove non-bird species and unidentified/NA values</span></span>
<span id="cb3-21"><a href="data-comparability.html#cb3-21" tabindex="-1"></a>point_count <span class="ot">&lt;-</span> point_count <span class="sc">%&gt;%</span></span>
<span id="cb3-22"><a href="data-comparability.html#cb3-22" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>common_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Unidentified Woodpecker&quot;</span>,</span>
<span id="cb3-23"><a href="data-comparability.html#cb3-23" tabindex="-1"></a>                             <span class="st">&quot;Eastern Chipmunk&quot;</span>,</span>
<span id="cb3-24"><a href="data-comparability.html#cb3-24" tabindex="-1"></a>                             <span class="st">&quot;Eastern Gray Squirrel&quot;</span>,</span>
<span id="cb3-25"><a href="data-comparability.html#cb3-25" tabindex="-1"></a>                             <span class="st">&quot;Red Squirrel&quot;</span>,</span>
<span id="cb3-26"><a href="data-comparability.html#cb3-26" tabindex="-1"></a>                             <span class="cn">NA</span>))</span>
<span id="cb3-27"><a href="data-comparability.html#cb3-27" tabindex="-1"></a></span>
<span id="cb3-28"><a href="data-comparability.html#cb3-28" tabindex="-1"></a><span class="co"># using the library naniar, we assess missing data/NANs or if exploratory processing of data did not clean up the NAs</span></span>
<span id="cb3-29"><a href="data-comparability.html#cb3-29" tabindex="-1"></a><span class="fu">miss_var_summary</span>(point_count)</span>
<span id="cb3-30"><a href="data-comparability.html#cb3-30" tabindex="-1"></a></span>
<span id="cb3-31"><a href="data-comparability.html#cb3-31" tabindex="-1"></a><span class="co"># above procedure revealed NAs in the observation_time column which are associated with data on Canada Geese from MABI1002 and MABI1001 on 5/22/2023. We will not delete this data</span></span>
<span id="cb3-32"><a href="data-comparability.html#cb3-32" tabindex="-1"></a><span class="co"># other columns/missing data in those can be ignored as distance was not calculated for all observations due to variation in survey_observers</span></span></code></pre></div>
</div>
<div id="cleaning-up-acoustic-data" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Cleaning up acoustic data<a href="data-comparability.html#cleaning-up-acoustic-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-comparability.html#cb4-1" tabindex="-1"></a><span class="co"># ensure begin clock and end clock time are in HHMMSS format</span></span>
<span id="cb4-2"><a href="data-comparability.html#cb4-2" tabindex="-1"></a><span class="co"># note: alternately, the begin and end clock time could be potentially extracted from the selection tables (if present)</span></span>
<span id="cb4-3"><a href="data-comparability.html#cb4-3" tabindex="-1"></a><span class="co"># appending a zero to begin and end clock time</span></span>
<span id="cb4-4"><a href="data-comparability.html#cb4-4" tabindex="-1"></a>acoustic_data<span class="sc">$</span>begin_clock_time <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;0&quot;</span>, acoustic_data<span class="sc">$</span>begin_clock_time)</span>
<span id="cb4-5"><a href="data-comparability.html#cb4-5" tabindex="-1"></a>acoustic_data<span class="sc">$</span> end_clock_time <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;0&quot;</span>, acoustic_data<span class="sc">$</span>end_clock_time)</span>
<span id="cb4-6"><a href="data-comparability.html#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="data-comparability.html#cb4-7" tabindex="-1"></a><span class="co"># write a function to convert to HH:MM:SS</span></span>
<span id="cb4-8"><a href="data-comparability.html#cb4-8" tabindex="-1"></a>convert_to_time <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb4-9"><a href="data-comparability.html#cb4-9" tabindex="-1"></a>  <span class="co"># convert string to numeric</span></span>
<span id="cb4-10"><a href="data-comparability.html#cb4-10" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(x)</span>
<span id="cb4-11"><a href="data-comparability.html#cb4-11" tabindex="-1"></a>  hours <span class="ot">&lt;-</span> <span class="fu">floor</span>(x<span class="sc">/</span><span class="dv">10000</span>)</span>
<span id="cb4-12"><a href="data-comparability.html#cb4-12" tabindex="-1"></a>  minutes <span class="ot">&lt;-</span> <span class="fu">floor</span>((x <span class="sc">-</span> hours<span class="sc">*</span><span class="dv">10000</span>)<span class="sc">/</span><span class="dv">100</span>)</span>
<span id="cb4-13"><a href="data-comparability.html#cb4-13" tabindex="-1"></a>  seconds <span class="ot">&lt;-</span> x <span class="sc">-</span> hours<span class="sc">*</span><span class="dv">10000</span> <span class="sc">-</span> minutes<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb4-14"><a href="data-comparability.html#cb4-14" tabindex="-1"></a>  <span class="fu">sprintf</span>(<span class="st">&quot;%02d:%02d:%02d&quot;</span>, hours, minutes, seconds)</span>
<span id="cb4-15"><a href="data-comparability.html#cb4-15" tabindex="-1"></a>}</span>
<span id="cb4-16"><a href="data-comparability.html#cb4-16" tabindex="-1"></a></span>
<span id="cb4-17"><a href="data-comparability.html#cb4-17" tabindex="-1"></a><span class="co"># make the conversion</span></span>
<span id="cb4-18"><a href="data-comparability.html#cb4-18" tabindex="-1"></a>acoustic_data<span class="sc">$</span>begin_clock_time <span class="ot">&lt;-</span> <span class="fu">sapply</span>(acoustic_data<span class="sc">$</span>begin_clock_time, convert_to_time)</span>
<span id="cb4-19"><a href="data-comparability.html#cb4-19" tabindex="-1"></a>acoustic_data<span class="sc">$</span>end_clock_time<span class="ot">&lt;-</span> <span class="fu">sapply</span>(acoustic_data<span class="sc">$</span>end_clock_time, convert_to_time)</span>
<span id="cb4-20"><a href="data-comparability.html#cb4-20" tabindex="-1"></a></span>
<span id="cb4-21"><a href="data-comparability.html#cb4-21" tabindex="-1"></a><span class="co"># convert to hms format to keep it consistent with point_count data</span></span>
<span id="cb4-22"><a href="data-comparability.html#cb4-22" tabindex="-1"></a>acoustic_data<span class="sc">$</span>begin_clock_time<span class="ot">&lt;-</span> hms<span class="sc">::</span><span class="fu">as_hms</span>(acoustic_data<span class="sc">$</span>begin_clock_time)</span>
<span id="cb4-23"><a href="data-comparability.html#cb4-23" tabindex="-1"></a>acoustic_data<span class="sc">$</span>end_clock_time <span class="ot">&lt;-</span> hms<span class="sc">::</span><span class="fu">as_hms</span>(acoustic_data<span class="sc">$</span>end_clock_time)</span>
<span id="cb4-24"><a href="data-comparability.html#cb4-24" tabindex="-1"></a></span>
<span id="cb4-25"><a href="data-comparability.html#cb4-25" tabindex="-1"></a><span class="co"># make the data column similar to point_count data in YYYY-MM-DD format</span></span>
<span id="cb4-26"><a href="data-comparability.html#cb4-26" tabindex="-1"></a>acoustic_data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">ymd</span>(acoustic_data<span class="sc">$</span>date)</span>
<span id="cb4-27"><a href="data-comparability.html#cb4-27" tabindex="-1"></a></span>
<span id="cb4-28"><a href="data-comparability.html#cb4-28" tabindex="-1"></a><span class="co"># extract year column</span></span>
<span id="cb4-29"><a href="data-comparability.html#cb4-29" tabindex="-1"></a>acoustic_data<span class="sc">$</span>year <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">year</span>(acoustic_data<span class="sc">$</span>date)</span>
<span id="cb4-30"><a href="data-comparability.html#cb4-30" tabindex="-1"></a></span>
<span id="cb4-31"><a href="data-comparability.html#cb4-31" tabindex="-1"></a><span class="co"># remove non-bird species and unidentified/NA values</span></span>
<span id="cb4-32"><a href="data-comparability.html#cb4-32" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb4-33"><a href="data-comparability.html#cb4-33" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>common_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Eastern Chipmunk&quot;</span>,</span>
<span id="cb4-34"><a href="data-comparability.html#cb4-34" tabindex="-1"></a>                             <span class="st">&quot;Red Squirrel&quot;</span>,</span>
<span id="cb4-35"><a href="data-comparability.html#cb4-35" tabindex="-1"></a>                             <span class="cn">NA</span>))</span>
<span id="cb4-36"><a href="data-comparability.html#cb4-36" tabindex="-1"></a></span>
<span id="cb4-37"><a href="data-comparability.html#cb4-37" tabindex="-1"></a><span class="co"># using the library naniar, we assess missing data/NANs or if exploratory processing of data did not clean up the NAs</span></span>
<span id="cb4-38"><a href="data-comparability.html#cb4-38" tabindex="-1"></a><span class="fu">miss_var_summary</span>(acoustic_data)</span>
<span id="cb4-39"><a href="data-comparability.html#cb4-39" tabindex="-1"></a></span>
<span id="cb4-40"><a href="data-comparability.html#cb4-40" tabindex="-1"></a><span class="co"># the column &#39;background&#39; has a large number of NAs, which can be ignored since we will not be using this column in future analysis.</span></span></code></pre></div>
</div>
<div id="creating-a-combined-dataset" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Creating a combined dataset<a href="data-comparability.html#creating-a-combined-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-comparability.html#cb5-1" tabindex="-1"></a><span class="co"># include the data_type for each dataset</span></span>
<span id="cb5-2"><a href="data-comparability.html#cb5-2" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span>  acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="data-comparability.html#cb5-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_type =</span> <span class="st">&quot;acoustic_data&quot;</span>)</span>
<span id="cb5-4"><a href="data-comparability.html#cb5-4" tabindex="-1"></a>point_count <span class="ot">&lt;-</span> point_count <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="data-comparability.html#cb5-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_type =</span> <span class="st">&quot;point_count&quot;</span>)</span>
<span id="cb5-6"><a href="data-comparability.html#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="data-comparability.html#cb5-7" tabindex="-1"></a><span class="co"># before we combine the two datasets, we want to ensure that both dates and site_id match across the two datasets. In other words, we do not want visits in which in which either acoustic data or point count data was not collected, since this is a simultaneous comparison</span></span>
<span id="cb5-8"><a href="data-comparability.html#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="data-comparability.html#cb5-9" tabindex="-1"></a><span class="co"># find dates to remove by checking for mismatches between the two datasets using both site_id and date</span></span>
<span id="cb5-10"><a href="data-comparability.html#cb5-10" tabindex="-1"></a>dates_to_remove <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(point_count, acoustic_data, </span>
<span id="cb5-11"><a href="data-comparability.html#cb5-11" tabindex="-1"></a>                             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;site_id&quot;</span>, <span class="st">&quot;date&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-12"><a href="data-comparability.html#cb5-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, date) <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="data-comparability.html#cb5-13" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb5-14"><a href="data-comparability.html#cb5-14" tabindex="-1"></a></span>
<span id="cb5-15"><a href="data-comparability.html#cb5-15" tabindex="-1"></a><span class="co"># remove data from sites and visits from the point count data which do not have corresponding acoustic annotations</span></span>
<span id="cb5-16"><a href="data-comparability.html#cb5-16" tabindex="-1"></a>point_count <span class="ot">&lt;-</span> point_count <span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a href="data-comparability.html#cb5-17" tabindex="-1"></a>  <span class="fu">anti_join</span>(dates_to_remove, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;site_id&quot;</span>, <span class="st">&quot;date&quot;</span>))</span>
<span id="cb5-18"><a href="data-comparability.html#cb5-18" tabindex="-1"></a></span>
<span id="cb5-19"><a href="data-comparability.html#cb5-19" tabindex="-1"></a><span class="co"># as a sanity check, let&#39;s repeat the above with acoustic data to ensure we are not keeping any extra site/visit annotations</span></span>
<span id="cb5-20"><a href="data-comparability.html#cb5-20" tabindex="-1"></a>acoustic_data_to_remove <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(acoustic_data, point_count, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;site_id&quot;</span>, <span class="st">&quot;date&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-21"><a href="data-comparability.html#cb5-21" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, date) <span class="sc">%&gt;%</span></span>
<span id="cb5-22"><a href="data-comparability.html#cb5-22" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb5-23"><a href="data-comparability.html#cb5-23" tabindex="-1"></a><span class="co"># sanity check successful and suggests that the acoustic annotations are often across dates and visits that have point_count data. No data needs to be further filtered.</span></span>
<span id="cb5-24"><a href="data-comparability.html#cb5-24" tabindex="-1"></a></span>
<span id="cb5-25"><a href="data-comparability.html#cb5-25" tabindex="-1"></a><span class="co"># combine the datasets</span></span>
<span id="cb5-26"><a href="data-comparability.html#cb5-26" tabindex="-1"></a>datSubset <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(point_count[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">15</span>,<span class="dv">18</span><span class="sc">:</span><span class="dv">21</span>)],</span>
<span id="cb5-27"><a href="data-comparability.html#cb5-27" tabindex="-1"></a>                   acoustic_data[,<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">9</span>,<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">18</span><span class="sc">:</span><span class="dv">21</span>)])</span>
<span id="cb5-28"><a href="data-comparability.html#cb5-28" tabindex="-1"></a></span>
<span id="cb5-29"><a href="data-comparability.html#cb5-29" tabindex="-1"></a><span class="co"># add a site name column</span></span>
<span id="cb5-30"><a href="data-comparability.html#cb5-30" tabindex="-1"></a>datSubset <span class="ot">&lt;-</span> datSubset <span class="sc">%&gt;%</span></span>
<span id="cb5-31"><a href="data-comparability.html#cb5-31" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">site_name =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-32"><a href="data-comparability.html#cb5-32" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">&quot;^ACAD&quot;</span>, site_id) <span class="sc">~</span> <span class="st">&quot;Acadia National Park&quot;</span>,</span>
<span id="cb5-33"><a href="data-comparability.html#cb5-33" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">&quot;^HBEF&quot;</span>, site_id) <span class="sc">~</span> <span class="st">&quot;Hubbard Brook Experimental Forest&quot;</span>,</span>
<span id="cb5-34"><a href="data-comparability.html#cb5-34" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">&quot;^KAWW&quot;</span>, site_id) <span class="sc">~</span> <span class="st">&quot;Katahdin Woods and Waters&quot;</span>,</span>
<span id="cb5-35"><a href="data-comparability.html#cb5-35" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">&quot;^MABI&quot;</span>, site_id) <span class="sc">~</span> <span class="st">&quot;Marsh-Billings-Rockefeller NHP&quot;</span></span>
<span id="cb5-36"><a href="data-comparability.html#cb5-36" tabindex="-1"></a>  ))</span>
<span id="cb5-37"><a href="data-comparability.html#cb5-37" tabindex="-1"></a></span>
<span id="cb5-38"><a href="data-comparability.html#cb5-38" tabindex="-1"></a><span class="co"># visit_numbers need to be reassigned and sorted based on the earliest date for each site_id</span></span>
<span id="cb5-39"><a href="data-comparability.html#cb5-39" tabindex="-1"></a><span class="co"># this is being done as a secondary sanity check to ensure that the same visit_numbers are being assigned to every single site_id and date combination for each data_type. In other words, for MABI1110 for say 2022-05-26 with visit_number 1 for point_count data, we ensure that the visit_number is 1 for the same date and site_id for acoustic data</span></span>
<span id="cb5-40"><a href="data-comparability.html#cb5-40" tabindex="-1"></a>datSubset <span class="ot">&lt;-</span> datSubset <span class="sc">%&gt;%</span></span>
<span id="cb5-41"><a href="data-comparability.html#cb5-41" tabindex="-1"></a>  <span class="fu">group_by</span>(site_id, data_type) <span class="sc">%&gt;%</span></span>
<span id="cb5-42"><a href="data-comparability.html#cb5-42" tabindex="-1"></a>  <span class="fu">arrange</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb5-43"><a href="data-comparability.html#cb5-43" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">visit_number =</span> <span class="fu">dense_rank</span>(date))</span>
<span id="cb5-44"><a href="data-comparability.html#cb5-44" tabindex="-1"></a></span>
<span id="cb5-45"><a href="data-comparability.html#cb5-45" tabindex="-1"></a><span class="co"># write to file</span></span>
<span id="cb5-46"><a href="data-comparability.html#cb5-46" tabindex="-1"></a><span class="fu">write.csv</span>(datSubset, <span class="st">&quot;results/pooled_pointCount_acoustic_data.csv&quot;</span>, <span class="at">row.names =</span> F)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="subsetting-data-and-running-exploratory-data-analyses.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vjjan91/newHampshire-pointCount-acoustics/edit/master/01_data-comparability.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
